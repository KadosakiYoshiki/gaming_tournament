<div class="mx-auto my-3 rounded">
  <%= will_paginate @message_outbox, {:param_name => 'outbox_page', :class => 'pagination'} %>
  <% if !@message_outbox.blank? %>
    <% @message_outbox.each do |message| %>
      <% receiveUser = destinate_user(message) %>
      <div class="m-auto bg-dark">
        <div class="m-auto row justify-content-start">
          <% if receiveUser.present? %>
            <div class="m-1">
              <% if receiveUser.image.present? %>
                <%= image_tag receiveUser.image.to_s, class: "img-fluid img-thumbnail rounded m-1", :style => "max-width:60px;" %>
              <% else %>
                <%= image_tag "no-profile-image.png", class: "img-fluid img-thumbnail rounded m-1", :style => "max-width:60px;" %>
              <% end %>
            </div>
            <div class="m-1 font-weight-bold text-muted">To:<%= link_to receiveUser.name, receiveUser, class: "text-reset" %></div>
          <% else %>
            <div class="m-1">存在しないユーザ</div>
          <% end %>
        </div>
        <div class="m-2"><%= message.text %></div>
        <div class="m-2 text-right font-weight-bold text-muted"><%= link_to l(message.updated_at, format: :short), edit_user_message_path(@user, message), remote: true, class: "text-reset" %></div>
      </div>
    <% end %>
  <%= will_paginate @message_outbox, {:param_name => 'outbox_page', :class => 'pagination'} %>
  <% else %>
    送信メッセージがありません
  <% end %>
</div>

<script>
  $(function(){
    $('.pagination a').attr('data-remote', 'true')
  });
</script>
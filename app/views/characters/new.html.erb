<% provide(:title, "使用キャラクター登録") %>
<h1>使用キャラクター登録</h1>

<div class="row">
  <div class="col-md-12 col-md-offset-0">
    <%= form_with(model: @character, url: user_characters_path, local: true, method: :post) do |f| %>
      <%= render 'shared/error_messages_character', object: @character %>
      
      <%= f.label :game_title %>
      <%= f.select :game_title, Character.game_titles.keys.to_a, { prompt: '選択してください' }, id: 'game_title', data: {remote: true, url: select_title_path}, class: "form-control" %>

      <div id="select-character">
        <%#= render 'select_character', object: @characters, f: f %>
      </div>
<!--
      <div id="title-one">
        <%#= f.select :main_character, @main_character_64 , {:include_blank => true}, {:class => "image-picker show-html form-control"} %>
        <%#= select :main_character, :character_id, @characters, {:include_blank => true}, class: "image-picker show-html form-control" %>
      </div>
!-->
      <%= f.submit "キャラ追加", class: "btn btn-primary btn-block btn-login" %>
    <% end %>
    
  </div>
</div>

<script>
/*
  $('#select-character').on("click", function() {
    $(".image-picker").imagepicker({
      show_label  : true
    })
  });
  */
  $(function() {
    $('#character-id').each(function() {
      $('.image-picker').imagepicker({
        show_label  : true
      })
    });
  });
  
  
</script>